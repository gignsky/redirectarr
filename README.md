# Redirectarr

---

## Description

    This program packaged using the nix flake system is a bare bones webserver that serves one or
    more sites to act as host pages for domains that are not currently in use or are in the process
    of being redirected. For example, don't you want to replace that ugly "You've Reached NGINX"
    page with something pretty? Or maybe a nice landing page for a website you have yet to create
    but bought the domain for already?

## Examples: `Coming Soon...`

---

## Development (Flakes)

This repo uses [Flakes](https://nixos.asia/en/flakes) from the get-go.

```bash
# Dev shell
nix develop

# or run via cargo
nix develop -c cargo run

# build
nix build
```

We also provide a [`justfile`](https://just.systems/) for Makefile'esque
commands to be run inside of the devShell.

## See Also

- [nixos.wiki: Packaging Rust projects with nix](https://nixos.wiki/wiki/Rust#Packaging_Rust_projects_with_nix)

<!-- ![CI Nix](https://github.com/gignsky/redirectarr/actions/workflows/ci-nix.yml/badge.svg)](https://github.com/gignsky/redirectarr/actions/workflows/ci-nix.yml) -->
<!-- [![Docs](https://github.com/gignsky/redirectarr/actions/workflows/docs.yml/badge.svg)](https://github.com/gignsky/redirectarr/actions/workflows/docs.yml) -->

[![Release](https://github.com/gignsky/redirectarr/actions/workflows/release.yml/badge.svg)](https://github.com/gignsky/redirectarr/actions/workflows/release.yml)
[![Update README with --help Output](https://github.com/gignsky/redirectarr/actions/workflows/help-to-readme.yml/badge.svg)](https://github.com/gignsky/redirectarr/actions/workflows/help-to-readme.yml)

# Installation & Usage

### Run immediately without installing (using Nix)

`$ nix run github:gignsky/redirectarr -- {optional-arguments (i.e. --help)}`

## Installation

### With Nix Shell (temporary installation in current shell)

`$ nix shell github:gignsky/redirectarr`

### With NixOS (using flakes)

In your `flake.nix` file:

1. add `inputs.redirectarr.url = "github:gignsky/redirectarr";` to your inputs
2. inside of your `environment.systemPackages` often defined under:
   `outputs.nixosConfigurations.{hostname}.nixpkgs.lib.nixosSystem.modules`
3. add either:
   1. `inputs.redirectarr.packages.${system}.redirectarr`
   2. `inputs.redirectarr.packages.${system}.default`

### Download the binary

1. Navigate to https://github.com/gignsky/redirectarr/releases
2. Download the latest (or desired) release for your operating system
   1. As of the time of this writing only x86_64 binaries are compiled for
      GNU/Linux and windows
3. if using Linux run `chmod +x ./{downloaded-binary}`
4. if using windows you can run the binary from the command prompt or powershell
   in order to pass arguments, if double-click running the .exe file the default
   process of the binary will run in the current folder of the binary without
   the remove flag
   1. FUTURE FUNCTIONALITY INTENDED: In the future it is intended that the
      program will produce a dialog box that allows the user to specify which
      option arguments to be used.

### Compile the binary yourself

1. git clone this repository:
   1. `$ git clone https://github.com/gignsky/redirectarr.git`
2. cd into the directory:
   1. `$ cd redirectarr`
3. enter development environment:
   1. `$ nix develop`
4. build binary with justfile (uses nix build command) or build with cargo
   1. `$ just build`
      1. nix build command
      2. produces a binary in `./result/bin/redirectarr`
   2. `$ cargo build`
      1. cargo build command (debug)
      2. produces a debug binary in `./target/debug/redirectarr`
   3. `$ cargo build --release`
      1. cargo build command (release)
      2. produces a debug binary in `./target/release/redirectarr`
5. in order to use this compiled binary in any location one must add the binary
   to their $PATH (this is OS specific and not within the scope of this README)
   1. NOTE: This is not an issue if installed using nix, whether that be flakes
      and NixOS or nix shell

## Usage

### When downloading the binary or compiling yourself

`$ ./{downloaded-binary} {optional-arguments (i.e. --help)}`

### When installed via Nix

`$ redirectarr {optional-arguments (i.e. --help)}`

<!-- THIS SECTION IS NOT TO BE MODIFIED MANUALLY AS IT IS AUTO-UPDATED BY A GITHUB ACTION -->

## Optional Arguments (automatically generated by github action)

```
A simple Rust project using Nix

Usage: redirectarr [OPTIONS] [NAME]

Arguments:
  [NAME]  an optional name to greet

Options:
  -v             whether to be verbose
  -h, --help     Print help
  -V, --version  Print version
```

# Development (Flakes)

This repo uses [Flakes](https://nixos.asia/en/flakes) from the get-go.

```bash
# Dev shell
nix develop

We also provide a [`justfile`](https://just.systems/) for Makefile'esque commands to be run inside of the devShell.
You can run `$ just` inside `$ nix develop` to see all available just outputs

## Tips

- Run `$ just update-flake` to update all flake inputs.
- Run `$ just update` to update all flake inputs and cargo dependencies
- Run `nix --accept-flake-config run github:juspay/omnix ci` to build _all_ outputs.
- [pre-commit] hooks will automatically be setup in Nix shell. You can also run `pre-commit run -a` manually to run the hooks (e.g.: to autoformat the project tree using `rustfmt`, `nixpkgs-fmt`, etc.).
```
